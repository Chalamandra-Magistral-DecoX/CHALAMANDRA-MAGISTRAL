<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chalamandra: Kit de Autoconocimiento</title>
    <!-- Fonts & Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&family=Bangers&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --rosa: #ff4d9e;
            --verde: #00ff99;
            --purple: #9933ff;
            --fondo: #080808;
        }

        body {
            background-color: var(--fondo);
            font-family: 'Montserrat', sans-serif;
            color: white;
            overflow-x: hidden;
            background-image: 
                radial-gradient(circle at 10% 10%, rgba(153, 51, 255, 0.1) 0%, transparent 40%),
                radial-gradient(circle at 90% 90%, rgba(255, 77, 158, 0.1) 0%, transparent 40%);
        }

        .font-bangers { font-family: 'Bangers', cursive; }

        /* Estilos del Dado 3D */
        .perspective-1000 { perspective: 1000px; }
        .dice {
            width: 120px;
            height: 120px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 2s cubic-bezier(0.17, 0.67, 0.14, 1.03);
            transform: rotateX(-20deg) rotateY(-20deg);
        }
        .dice-face {
            position: absolute;
            width: 120px;
            height: 120px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            backface-visibility: hidden;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.5);
        }
        .face-1 { transform: rotateY(0deg) translateZ(60px); background: var(--rosa); }
        .face-2 { transform: rotateY(180deg) translateZ(60px); background: var(--purple); }
        .face-3 { transform: rotateY(90deg) translateZ(60px); background: var(--verde); }
        .face-4 { transform: rotateY(-90deg) translateZ(60px); background: #3399ff; }
        .face-5 { transform: rotateX(90deg) translateZ(60px); background: #ff8500; }
        .face-6 { transform: rotateX(-90deg) translateZ(60px); background: #ef4444; }

        /* Animaciones */
        .fade-in { animation: fadeIn 0.5s ease-out forwards; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Notificaci√≥n Custom */
        #toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: rgba(255, 77, 158, 0.9);
            color: white;
            padding: 12px 24px;
            border-radius: 50px;
            font-weight: 900;
            font-style: italic;
            text-transform: uppercase;
            z-index: 5000;
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        #toast.show { transform: translateX(-50%) translateY(0); }

        .tool-view { display: none; }
        .tool-view.active { display: block; }
    </style>
</head>
<body class="p-6 md:p-12">

    <!-- Notificaci√≥n -->
    <div id="toast">¬°Mensaje de barrio activado!</div>

    <div id="main-menu" class="tool-view active max-w-5xl mx-auto fade-in">
        <header class="text-center mb-10">
            <h1 class="text-5xl md:text-7xl font-bangers italic text-[#ff4d9e] mb-2 tracking-tighter drop-shadow-[0_0_15px_rgba(255,77,158,0.4)] uppercase">
                CHALAMANDRA
            </h1>
            <p class="text-zinc-500 font-bold uppercase tracking-[0.3em] text-[10px]">
                Dashboard de Introspecci√≥n y Autoconocimiento
            </p>
        </header>

        <div class="flex flex-col lg:flex-row gap-8 items-center lg:items-start">
            <!-- Secci√≥n del Dado -->
            <div class="w-full lg:w-1/3 bg-zinc-900/40 p-8 rounded-[2.5rem] border border-zinc-800 flex flex-col items-center">
                <h3 class="font-black italic text-zinc-500 uppercase text-xs mb-8 tracking-widest text-center">¬øNo sabes por d√≥nde empezar?</h3>
                
                <div class="perspective-1000 mb-10">
                    <div class="dice" id="dice">
                        <div class="dice-face face-1">üç∞</div>
                        <div class="dice-face face-2">üé©</div>
                        <div class="dice-face face-3">üéí</div>
                        <div class="dice-face face-4">üó∫Ô∏è</div>
                        <div class="dice-face face-5">‚öΩ</div>
                        <div class="dice-face face-6">‚ú®</div>
                    </div>
                </div>

                <button onclick="rollDice()" id="roll-btn" class="w-full py-4 bg-gradient-to-r from-pink-600 to-purple-600 rounded-2xl font-black italic uppercase tracking-tighter hover:scale-105 transition-all shadow-lg active:scale-95 flex items-center justify-center gap-3">
                    <i class="fas fa-dice"></i> <span id="roll-text">Chalamandrazo</span>
                </button>

                <div id="dice-suggestion" class="hidden mt-6 p-4 bg-zinc-800/80 border border-zinc-700 rounded-2xl text-center fade-in">
                    <p class="text-[10px] text-zinc-500 uppercase font-bold mb-1">El destino dice:</p>
                    <button onclick="openSuggestedView()" id="suggestion-link" class="text-sm font-black uppercase italic hover:underline"></button>
                </div>
            </div>

            <!-- Grid de Herramientas -->
            <div class="w-full lg:w-2/3 grid grid-cols-2 md:grid-cols-3 gap-4">
                <div class="bg-zinc-900/60 border border-pink-500/20 rounded-3xl p-5 backdrop-blur-sm shadow-xl hover:border-pink-500/60 transition-all cursor-pointer group flex flex-col items-center text-center" onclick="changeView('pastelote')">
                    <i class="fas fa-chart-pie text-pink-500 text-3xl mb-3 group-hover:scale-110 transition-transform"></i>
                    <h2 class="font-black text-transparent bg-clip-text bg-gradient-to-r from-pink-400 to-pink-600 text-xl uppercase italic">Pastelote</h2>
                    <p class="text-[10px] text-zinc-500 uppercase font-medium">Ficha T√©cnica</p>
                </div>
                <div class="bg-zinc-900/60 border border-purple-500/20 rounded-3xl p-5 backdrop-blur-sm shadow-xl hover:border-purple-500/60 transition-all cursor-pointer group flex flex-col items-center text-center" onclick="changeView('looks')">
                    <i class="fas fa-sparkles text-purple-500 text-3xl mb-3 group-hover:scale-110 transition-transform"></i>
                    <h2 class="font-black text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-purple-600 text-xl uppercase italic">6 Looks</h2>
                    <p class="text-[10px] text-zinc-500 uppercase font-medium">Ficha T√©cnica</p>
                </div>
                <div class="bg-zinc-900/60 border border-green-500/20 rounded-3xl p-5 backdrop-blur-sm shadow-xl hover:border-green-500/60 transition-all cursor-pointer group flex flex-col items-center text-center" onclick="changeView('mochila')">
                    <i class="fas fa-shopping-bag text-green-500 text-3xl mb-3 group-hover:scale-110 transition-transform"></i>
                    <h2 class="font-black text-transparent bg-clip-text bg-gradient-to-r from-green-400 to-green-600 text-xl uppercase italic">Mochila</h2>
                    <p class="text-[10px] text-zinc-500 uppercase font-medium">Ficha T√©cnica</p>
                </div>
                <div class="bg-zinc-900/60 border border-blue-500/20 rounded-3xl p-5 backdrop-blur-sm shadow-xl hover:border-blue-500/60 transition-all cursor-pointer group flex flex-col items-center text-center" onclick="changeView('mapa')">
                    <i class="fas fa-map text-blue-500 text-3xl mb-3 group-hover:scale-110 transition-transform"></i>
                    <h2 class="font-black text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-blue-600 text-xl uppercase italic">Mapa Caos</h2>
                    <p class="text-[10px] text-zinc-500 uppercase font-medium">Ficha T√©cnica</p>
                </div>
                <div class="bg-zinc-900/60 border border-orange-500/20 rounded-3xl p-5 backdrop-blur-sm shadow-xl hover:border-orange-500/60 transition-all cursor-pointer group flex flex-col items-center text-center" onclick="changeView('cancha')">
                    <i class="fas fa-bullseye text-orange-500 text-3xl mb-3 group-hover:scale-110 transition-transform"></i>
                    <h2 class="font-black text-transparent bg-clip-text bg-gradient-to-r from-orange-400 to-orange-600 text-xl uppercase italic">La Cancha</h2>
                    <p class="text-[10px] text-zinc-500 uppercase font-medium">Ficha T√©cnica</p>
                </div>
                <div class="bg-zinc-900/60 border border-red-500/20 rounded-3xl p-5 backdrop-blur-sm shadow-xl hover:border-red-500/60 transition-all cursor-pointer group flex flex-col items-center text-center" onclick="changeView('altar')">
                    <i class="fas fa-fire text-red-500 text-3xl mb-3 group-hover:scale-110 transition-transform"></i>
                    <h2 class="font-black text-transparent bg-clip-text bg-gradient-to-r from-red-400 to-red-600 text-xl uppercase italic">El Altar</h2>
                    <p class="text-[10px] text-zinc-500 uppercase font-medium">Ficha T√©cnica</p>
                </div>
                <div class="col-span-2 md:col-span-3 bg-zinc-800/20 border border-emerald-500/20 rounded-3xl p-6 shadow-xl hover:border-emerald-500/60 transition-all cursor-pointer flex items-center justify-between" onclick="changeView('laberinto')">
                    <div class="flex items-center gap-4">
                        <i class="fas fa-shoe-prints text-emerald-400 text-3xl"></i>
                        <div>
                            <h2 class="font-black text-emerald-400 text-xl uppercase italic">Laberinto de la Trampa</h2>
                            <p class="text-[10px] text-zinc-500 uppercase font-medium">Estrategia Mental</p>
                        </div>
                    </div>
                    <i class="fas fa-chevron-right text-zinc-700"></i>
                </div>
            </div>
        </div>

        <footer class="mt-12 text-center text-zinc-700 text-[10px] font-bold uppercase tracking-[0.5em] italic">
            "No es suerte, mi chama, es sincron√≠a."
        </footer>
    </div>

    <!-- Vistas de Herramientas -->

    <!-- El Pastelote -->
    <div id="view-pastelote" class="tool-view max-w-2xl mx-auto fade-in">
        <button onclick="changeView('menu')" class="flex items-center gap-2 text-zinc-500 hover:text-white transition-colors mb-6 text-sm font-bold uppercase italic">
            <i class="fas fa-chevron-left"></i> Volver
        </button>
        <div class="bg-zinc-900 border-2 border-pink-500/40 rounded-[2.5rem] p-8 shadow-2xl relative overflow-hidden">
            <h2 class="text-4xl font-black italic text-pink-500 mb-6 uppercase tracking-tighter">El Pastelote</h2>
            <p class="text-zinc-400 mb-6 text-sm">¬øQu√© rebanada te vas a comer hoy? Haz clic en una emoci√≥n para procesar su ciclo.</p>
            <div class="grid grid-cols-2 gap-3 mb-8">
                <button onclick="showToast('Analiza: ¬øQu√© aliment√≥ tu Enojo hoy?')" class="h-20 bg-zinc-800/50 rounded-2xl font-black text-pink-300 border border-zinc-700 hover:border-pink-500 transition-all uppercase italic text-xs">Enojo</button>
                <button onclick="showToast('Analiza: ¬øQu√© momento te dio Ternura?')" class="h-20 bg-zinc-800/50 rounded-2xl font-black text-pink-300 border border-zinc-700 hover:border-pink-500 transition-all uppercase italic text-xs">Ternura</button>
                <button onclick="showToast('Analiza: Celebra tu Gozo del d√≠a.')" class="h-20 bg-zinc-800/50 rounded-2xl font-black text-pink-300 border border-zinc-700 hover:border-pink-500 transition-all uppercase italic text-xs">Gozo</button>
                <button onclick="showToast('Analiza: Suelta ese Drama Queen interno.')" class="h-20 bg-zinc-800/50 rounded-2xl font-black text-pink-300 border border-zinc-700 hover:border-pink-500 transition-all uppercase italic text-xs">Drama</button>
                <button onclick="showToast('Analiza: ¬øQu√© Duda te detiene?')" class="h-20 bg-zinc-800/50 rounded-2xl font-black text-pink-300 border border-zinc-700 hover:border-pink-500 transition-all uppercase italic text-xs">Duda</button>
                <button onclick="showToast('Analiza: Abraza tu Miedo.')" class="h-20 bg-zinc-800/50 rounded-2xl font-black text-pink-300 border border-zinc-700 hover:border-pink-500 transition-all uppercase italic text-xs">Miedo</button>
            </div>
            <textarea class="w-full bg-black/40 border border-zinc-800 rounded-2xl p-4 text-sm focus:border-pink-500 outline-none h-32 text-white" placeholder="Escribe aqu√≠ tu reflexi√≥n del barrio..."></textarea>
        </div>
    </div>

    <!-- 6 Looks -->
    <div id="view-looks" class="tool-view max-w-2xl mx-auto fade-in">
        <button onclick="changeView('menu')" class="flex items-center gap-2 text-zinc-500 hover:text-white transition-colors mb-6 text-sm font-bold uppercase italic">
            <i class="fas fa-chevron-left"></i> Volver
        </button>
        <div class="bg-zinc-900 border-2 border-purple-500/40 rounded-[2.5rem] p-8 shadow-2xl">
            <h2 class="text-4xl font-black italic text-purple-500 mb-6 uppercase tracking-tighter">6 Looks Mentales</h2>
            <p class="text-zinc-400 mb-6 text-sm">Cambia de outfit cognitivo para ver tu situaci√≥n desde otra esquina.</p>
            <div class="grid grid-cols-2 gap-3">
                <div class="bg-zinc-100 text-black p-5 rounded-2xl text-center cursor-pointer hover:scale-105 transition-transform" onclick="showToast('Pregunta: ¬øCu√°les son los datos fr√≠os?')">
                    <div class="font-black text-xs uppercase italic">Bibliotecaria</div>
                </div>
                <div class="bg-red-500 text-white p-5 rounded-2xl text-center cursor-pointer hover:scale-105 transition-transform" onclick="showToast('Pregunta: ¬øQu√© grita tu herida?')">
                    <div class="font-black text-xs uppercase italic">Drama Queen</div>
                </div>
                <div class="bg-zinc-950 text-white border border-zinc-800 p-5 rounded-2xl text-center cursor-pointer hover:scale-105 transition-transform" onclick="showToast('Pregunta: ¬øQu√© es lo peor que pasar√°?')">
                    <div class="font-black text-xs uppercase italic">Hater</div>
                </div>
                <div class="bg-yellow-400 text-black p-5 rounded-2xl text-center cursor-pointer hover:scale-105 transition-transform" onclick="showToast('Pregunta: ¬øQu√© es lo que s√≠ sirve?')">
                    <div class="font-black text-xs uppercase italic">Optimista</div>
                </div>
                <div class="bg-green-500 text-white p-5 rounded-2xl text-center cursor-pointer hover:scale-105 transition-transform" onclick="showToast('Pregunta: ¬øQu√© idea loca har√≠as?')">
                    <div class="font-black text-xs uppercase italic">Creativa</div>
                </div>
                <div class="bg-blue-600 text-white p-5 rounded-2xl text-center cursor-pointer hover:scale-105 transition-transform" onclick="showToast('Pregunta: ¬øCu√°l es la orden de hoy?')">
                    <div class="font-black text-xs uppercase italic">Jefa</div>
                </div>
            </div>
        </div>
    </div>

    <!-- El Altar -->
    <div id="view-altar" class="tool-view max-w-2xl mx-auto fade-in">
        <button onclick="changeView('menu')" class="flex items-center gap-2 text-zinc-500 hover:text-white transition-colors mb-6 text-sm font-bold uppercase italic">
            <i class="fas fa-chevron-left"></i> Volver
        </button>
        <div class="bg-zinc-900 border-2 border-red-500/40 rounded-[2.5rem] p-8 shadow-2xl">
            <h2 class="text-4xl font-black italic text-red-500 mb-6 uppercase tracking-tighter">El Altar</h2>
            <p class="text-zinc-400 mb-6 text-sm">Honra lo que se rompi√≥. Escribe lo que dejas ir para transmutarlo en luz.</p>
            <textarea id="altar-text" class="w-full bg-black/40 border border-zinc-800 rounded-2xl p-4 text-sm focus:border-red-500 outline-none h-48 mb-6 text-white transition-all duration-1000" placeholder="¬øQu√© est√°s soltando hoy, mi chama?"></textarea>
            <button onclick="burnRitual()" class="w-full bg-red-600 hover:bg-red-500 text-white font-black italic uppercase py-4 rounded-2xl transition-all shadow-xl">
                Encender Llama Ritual
            </button>
        </div>
    </div>

    <!-- La Mochila -->
    <div id="view-mochila" class="tool-view max-w-2xl mx-auto fade-in">
        <button onclick="changeView('menu')" class="flex items-center gap-2 text-zinc-500 hover:text-white transition-colors mb-6 text-sm font-bold uppercase italic">
            <i class="fas fa-chevron-left"></i> Volver
        </button>
        <div class="bg-zinc-900 border-2 border-green-500/40 rounded-[2.5rem] p-8 shadow-2xl">
            <h2 class="text-4xl font-black italic text-green-500 mb-6 uppercase tracking-tighter">La Mochila</h2>
            <p class="text-zinc-400 mb-6 text-sm">¬øQu√© superpoderes llevas hoy en tu inventario para enfrentar el barrio?</p>
            <div class="grid grid-cols-4 gap-2 mb-8" id="backpack-grid">
                <!-- Se generan botones de inventario -->
            </div>
        </div>
    </div>

    <!-- Mapa Caos -->
    <div id="view-mapa" class="tool-view max-w-2xl mx-auto fade-in">
        <button onclick="changeView('menu')" class="flex items-center gap-2 text-zinc-500 hover:text-white transition-colors mb-6 text-sm font-bold uppercase italic">
            <i class="fas fa-chevron-left"></i> Volver
        </button>
        <div class="bg-zinc-900 border-2 border-blue-500/40 rounded-[2.5rem] p-8 shadow-2xl">
            <h2 class="text-4xl font-black italic text-blue-500 mb-6 uppercase tracking-tighter">Mapa del Caos</h2>
            <div class="w-full aspect-video bg-black border-2 border-zinc-800 rounded-[2rem] relative flex items-center justify-center overflow-hidden">
                <div class="absolute top-6 left-6 text-red-500 font-black italic text-[10px] uppercase">Peligro üö©</div>
                <div class="absolute bottom-6 right-6 text-green-500 font-black italic text-[10px] uppercase">Seguro üè†</div>
                <div class="text-zinc-800 font-black italic text-5xl uppercase opacity-20 rotate-12 select-none">Flow Map</div>
            </div>
            <p class="mt-6 text-center text-zinc-500 italic text-sm">Visualiza tus rutas de escape y detecta tus callejones sin salida.</p>
        </div>
    </div>

    <!-- La Cancha -->
    <div id="view-cancha" class="tool-view max-w-2xl mx-auto fade-in">
        <button onclick="changeView('menu')" class="flex items-center gap-2 text-zinc-500 hover:text-white transition-colors mb-6 text-sm font-bold uppercase italic">
            <i class="fas fa-chevron-left"></i> Volver
        </button>
        <div class="bg-zinc-900 border-2 border-orange-500/40 rounded-[2.5rem] p-8 shadow-2xl">
            <h2 class="text-4xl font-black italic text-orange-500 mb-6 uppercase tracking-tighter">La Cancha</h2>
            <div class="w-full h-80 bg-emerald-950/20 border-2 border-white/10 rounded-3xl relative overflow-hidden">
                <div class="absolute top-10 left-10 bg-pink-500 p-2 rounded-lg text-[10px] font-black italic shadow-2xl cursor-move">SOLUCI√ìN CRACK</div>
                <div class="absolute bottom-10 right-10 bg-blue-500 p-2 rounded-lg text-[10px] font-black italic shadow-2xl cursor-move">DEFENSA DE MIEDOS</div>
                <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 border border-white/10 w-32 h-32 rounded-full flex items-center justify-center">
                    <span class="text-[10px] text-white/10 font-black uppercase italic">Centro del Flow</span>
                </div>
            </div>
            <p class="mt-6 text-center text-zinc-500 italic text-sm">Posiciona tus ideas como un equipo de primera divisi√≥n.</p>
        </div>
    </div>

    <!-- Laberinto -->
    <div id="view-laberinto" class="tool-view max-w-2xl mx-auto fade-in">
        <button onclick="changeView('menu')" class="flex items-center gap-2 text-zinc-500 hover:text-white transition-colors mb-6 text-sm font-bold uppercase italic">
            <i class="fas fa-chevron-left"></i> Volver
        </button>
        <div class="bg-zinc-900 border-2 border-emerald-500/40 rounded-[2.5rem] p-8 shadow-2xl">
            <h2 class="text-4xl font-black italic text-emerald-500 mb-6 uppercase tracking-tighter">Laberinto</h2>
            <div class="bg-zinc-800/30 p-6 rounded-2xl border border-emerald-500/20 mb-6">
                <p class="text-sm italic font-medium">"Topaste con pared: Sientes que tu bloqueo es m√°s grande que tus ganas."</p>
            </div>
            <div class="space-y-2">
                <button onclick="showToast('¬°Esa grieta era la clave! Tu curiosidad te liber√≥.')" class="w-full p-4 bg-zinc-800 hover:bg-emerald-500/20 rounded-xl text-left text-xs font-bold uppercase italic border border-zinc-700">A. Buscas una grieta (Curiosidad)</button>
                <button onclick="showToast('El silencio disolvi√≥ el muro. Laberinto superado.')" class="w-full p-4 bg-zinc-800 hover:bg-emerald-500/20 rounded-xl text-left text-xs font-bold uppercase italic border border-zinc-700">B. Meditas ante el muro (Aceptaci√≥n)</button>
            </div>
        </div>
    </div>

    <script>
        // --- Navegaci√≥n ---
        function changeView(viewId) {
            document.querySelectorAll('.tool-view').forEach(view => view.classList.remove('active'));
            const target = document.getElementById('view-' + viewId) || document.getElementById('main-menu');
            target.classList.add('active');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // --- Toast System ---
        function showToast(msg) {
            const toast = document.getElementById('toast');
            toast.innerText = msg;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        // --- L√≥gica del Dado ---
        let isRolling = false;
        let lastSuggestion = null;
        const tools = [
            { id: 'pastelote', name: 'Pastelote', color: 'pink', rotations: {x: 0, y: 0} },
            { id: 'looks', name: '6 Looks', color: 'purple', rotations: {x: 0, y: 180} },
            { id: 'mochila', name: 'Mochila', color: 'green', rotations: {x: 0, y: -90} },
            { id: 'mapa', name: 'Mapa Caos', color: 'blue', rotations: {x: 0, y: 90} },
            { id: 'cancha', name: 'Cancha', color: 'orange', rotations: {x: -90, y: 0} },
            { id: 'altar', name: 'El Altar', color: 'red', rotations: {x: 90, y: 0} }
        ];

        function rollDice() {
            if (isRolling) return;
            isRolling = true;
            
            const btn = document.getElementById('roll-btn');
            const dice = document.getElementById('dice');
            const suggDiv = document.getElementById('dice-suggestion');
            const rollText = document.getElementById('roll-text');

            suggDiv.classList.add('hidden');
            rollText.innerText = "Decodificando...";
            btn.disabled = true;

            const randomIdx = Math.floor(Math.random() * tools.length);
            const selection = tools[randomIdx];
            lastSuggestion = selection.id;

            const extraSpins = 1440;
            const targetX = selection.rotations.x + extraSpins;
            const targetY = selection.rotations.y + extraSpins;

            dice.style.transform = `rotateX(${targetX}deg) rotateY(${targetY}deg)`;

            setTimeout(() => {
                isRolling = false;
                btn.disabled = false;
                rollText.innerText = "Chalamandrazo";
                
                const suggLink = document.getElementById('suggestion-link');
                suggLink.innerText = "Abrir " + selection.name + " ‚Üí";
                suggLink.className = `text-sm font-black uppercase italic hover:underline text-${selection.color}-400`;
                suggDiv.classList.remove('hidden');
            }, 2000);
        }

        function openSuggestedView() {
            if (lastSuggestion) changeView(lastSuggestion);
        }

        // --- Altar Ritual ---
        function burnRitual() {
            const ta = document.getElementById('altar-text');
            if (!ta.value.trim()) {
                showToast("Escribe algo para soltar, mi chama.");
                return;
            }
            ta.style.filter = "blur(15px)";
            ta.style.opacity = "0.2";
            showToast("Ritual completado. Has honrado el cierre.");
        }

        // --- Mochila Init ---
        const items = ['üí£ Audacia', 'üï∂Ô∏è Estilo', '‚ù§Ô∏è Lealtad', 'üî• Aguante', 'üßø Calma', 'üí∞ Valor', 'üß† Ma√±a', '‚ö° Chispa'];
        const grid = document.getElementById('backpack-grid');
        items.forEach(item => {
            const btn = document.createElement('button');
            btn.innerText = item;
            btn.className = "aspect-square bg-zinc-800 border border-zinc-700 rounded-xl flex flex-col items-center justify-center text-[9px] font-black uppercase hover:border-green-500 transition-all";
            btn.onclick = () => btn.classList.toggle('bg-green-500/20');
            grid.appendChild(btn);
        });

    </script>
</body>
</html>
